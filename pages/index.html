<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <link rel="stylesheet" href="./css/index.css">
    <style>

    </style>
</head>


<body>
    <div id="app">
        <div class="text">{{message}}</div>
        <div class="wrapper" v-if="state">
            <ul>
                <li class="container">
                    <section class="sphere"></section>
                    <span class="shadow"></span>
                </li>
                <li class="container">
                    <section class="sphere"></section>
                    <span class="shadow"></span>
                </li>
                <li class="container">
                    <section class="sphere"></section>
                    <span class="shadow"></span>
                </li>
                <li class="container">
                    <section class="sphere"></section>
                    <span class="shadow"></span>
                </li>
            </ul>
            <button @click="starts">开始</button>
        </div>
        <div class="wrappers" v-if="!state">
                <div class="frist">
                    <div class="hh">
                        <div class="div1">
                            <div :class="[{div2:true} ,frist]"></div>
                            <div :class="[{div3:true} ,frist]"></div>
                            <div :class="[{div4:true} ,frist]"></div>
                            <div :class="[{div5:true} ,frist]"></div>
                            <div :class="[{div6:true} ,frist]"></div>
                            <div :class="[{div7:true} ,frist]"></div>
                        </div>
                    </div>
                </div>
                <div>
                    <div class="second">
                        <div class="hh">
                            <div class="div1">
                                <div :class="[{div2:true} ,second]"></div>
                                <div :class="[{div3:true} ,second]"></div>
                                <div :class="[{div4:true} ,second]"></div>
                                <div :class="[{div5:true} ,second]"></div>
                                <div :class="[{div6:true} ,second]"></div>
                                <div :class="[{div7:true} ,second]"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div>
                    <div class="thd">
                        <div class="hh">
                            <div class="div1">
                                <div :class="[{div2:true} ,throd]"></div>
                                <div :class="[{div3:true} ,throd]"></div>
                                <div :class="[{div4:true} ,throd]"></div>
                                <div :class="[{div5:true} ,throd]"></div>
                                <div :class="[{div6:true} ,throd]"></div>
                                <div :class="[{div7:true} ,throd]"></div>
                            </div>
                        </div>
                    </div>
                </div>
        </div>
    </div>
    <script>
        var app = new Vue({
            el: '#app',
            data: {
                state: true,
                message: '任务队列',
                frist: 'color1',
                second: 'color2',
                throd: 'color3'
            },
            mounted() {
                var start = setInterval(() => {
                    var colorNum = parseInt(Math.random() * 3 + 1, 10)
                    this.frist = `color${colorNum}`
                    this.second= `color${colorNum}`
                    this.throd = `color${colorNum}`

                }, 1000)
                setInterval(()=>{
                    this.postText(start)
                },50)
                    


            },

            methods: {
                postText:  (a) => {
                    clearInterval(a)
                    axios.get('/updata', {
                        })
                        .then(function (response) {
                           let colorNums = [...response.data.data]
                          if(response.data.data == "") {return}
                          else{
                            app.frist = `color${colorNums[0]}`
                           app.second = `color${colorNums[1]}`
                           app.throd = `color${colorNums[2]}`
                          }   
                        })
                },
                starts: function(){
                    this.state = false
                },
            }


        })
    </script>
</body>

</html>